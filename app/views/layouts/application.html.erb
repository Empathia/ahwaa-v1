<!DOCTYPE html>
<html>
<head>
  <title>Transcend</title>
  <%= javascript_include_tag :defaults, 'locales', 'form_validator', 'sitescript', :cache => true%>
  <%= stylesheet_link_tag 'reset', 'fonts', 'style' %>
  <%= csrf_meta_tag %>
  <%= yield(:head) %>
  <!--[if lt IE 9]>
    <%= javascript_include_tag 'html5_ie' %>
  <![endif]-->
</head>
<body>
  <div>
    <% flash.each do |key, msg| %>
      <div class="flash <%= key %>"><%= msg %></div>
    <% end %>
        <header>
          <div class="rainbow"></div>
          <div class="gray <%= current_page?(root_path) ? 'light' : 'dark' %>"></div>
          <div class="aligned">
            <div class="header-top <%= current_page?(root_path) ? 'homepage' : 'topic' %>">
              <div class="links">
                <% if !current_page?(root_path) %>
                  <div><%= link_to 'TRANSCEND', root_path, :class => 'lgbt' %></div>
                <% end %>
                <div><%= link_to 'ﺔﻴﺑﺮﻌﻟﺍ ﺔﻐﻠﻟﺎﺑ', { :locale => 'ar' }, :class => 'lan' %></div>
              </div>
              <% if logged_in? %>
                <ul class="logged_opts">
                  <li><b><%= t('.header.logged_in.hi', {:username => current_user.username}) %></b></li>
                  <li><%= link_to t('.header.logged_in.my_account'), user_path %></li>
                  <li><%= link_to t('.header.logged_in.sign_out'), logout_path %></li>
                </ul>
              <% else %>
                <div class="sign-up">
                  <div class="auth-wrapper">
                    <a href="#" id="sign-up" class="border-all">
                      <span class="sign-up-btn"><%= t('.header.auth.sign_up') %></span>
                    </a>
                    <%= form_for User.new, :html => {:class => "over-form sign-up-form"} do |f| %>
                      <p class="form-parag"><%= t('.header.sign_up_form.legend') %></p>
                      <ul>
                        <li class="email">
                          <%= f.email_field :email, :required => "true", :placeholder => t('.header.sign_up_form.email') %>
                        </li>
                        <li class="username">
                          <%= f.text_field :username, :required => "true", :placeholder => t('.header.sign_up_form.username') %>
                        </li>
                      </ul>
                      <div class="errors"></div>
                      <p class="legend"><%= t('.header.sign_up_form.note_pt1') %> <%= link_to t('.header.sign_up_form.terms_of_use') %> <%= t('.header.sign_up_form.note_pt2') %> <%= link_to t('.header.sign_up_form.privacy_policy') %> <%=t('.header.sign_up_form.note_pt3')%></p>
                      <%= f.submit nil, :class => "auth-submit border-all" %>
                    <% end %>
                  </div>
                  <div class="auth-wrapper">
                    <a href="#" id="login">
                      <span><%= t('.header.auth.login') %></span>
                    </a>
                    <%= form_tag login_path, :class => "over-form login-form" do %>
                      <ul>
                        <li class="login"><%= text_field_tag :login, nil, :required => "true", :placeholder => t('.header.login_form.login') %></li>
                        <li class="password"><%= password_field_tag :password, nil, :required => "true", :placeholder => t('.header.login_form.password') %></li>
                      </ul>
                      <p class="legend"><%= link_to t('.header.login_form.forgot_password'), '#', :id => 'forgot-pass' %></p>
                      <%= submit_tag t('.header.login_form.sign_in'), :class => "auth-submit border-all" %>
                    <% end %>
                    <%= form_tag passwords_path, :class => "over-form forgot-pass-form" do %>
                      <p class="form-parag"><%= t('.header.forgot_pass_form.legend') %></p>
                      <ul>
                        <li class="login">
                          <%= text_field_tag :login, nil, :required => "true", :placeholder => t('.header.forgot_pass_form.login') %>
                        </li>
                      </ul>
                      <%= submit_tag t('.header.forgot_pass_form.send'), :class => "auth-submit border-all" %>
                        <input type="button" class="cancel-forgot btn-gradient" value="<%= t('.header.forgot_pass_form.cancel') %>">
                    <% end %>
                   </div>
                </div>
              <% end %>
              <div class="search">
                <p class="border-all">
                  <%= text_field_tag 'query', '', :placeholder => t('.header.search_topics')%>
                  <span></span>
                </p>
                <ul class='search_results'></ul>
              </div>
            </div>
          </div>
          <div class="header-wrapper">
            <div class="header-tags aligned">
              <ul id="header-tags">
                <% Topic.tag_counts.each do |tag| %>
                  <li><%= link_to tag, topic_tag_path(tag.name) %></li>
                <% end %>
                <% Topic.tag_counts.each do |tag| %>
                  <li><%= link_to tag, topic_tag_path(tag.name) %></li>
                <% end %>
                <li class="more">
                  <%= link_to 'More' %>
                  <ul id="moretags" class="more-tags border-all border-menu">
                  </ul>
                </li>
              </ul>
              <a href="<%= new_topic_request_path %>" class="request-topic <%= 'disabled' if !logged_in? %>">
                <span>
                  <span><%= t('.header.request_topic.button')%></span>
                </span>
              </a>
            </div>
          </div>
        </header>
    <div class="container">
      <%= yield %>
    </div>
    <div class="request-error">
      <span></span>
      <div>
        <p><%= t('.header.request_topic.legend') %></p>
        <a href="#" class="border-all"><span class="sign-up-btn"><%= t('.header.request_topic.sign_up') %></span></a>
      </div>
    </div>
    <footer>
      <div class="footer-shadow"></div>
      <div class="aligned">
        <%= link_to t('.footer.all_rights', {:year => '2010'}) %>
        <ul>
          <li><%= link_to t('.footer.about') %> - </li>
          <li><%= link_to t('.footer.privacy_policy') %></li>
        </ul>
      </div>
    </footer>
  </div>
</body>
</html>
