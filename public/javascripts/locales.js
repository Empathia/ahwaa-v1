if (!window.I18n) { I18n = {}; }

I18n.defaultLocale = "en";

I18n.translations = {"en":{"number":{"format":{"separator":".","precision":3,"delimiter":",","significant":false,"strip_insignificant_zeros":false},"human":{"format":{"precision":3,"delimiter":"","strip_insignificant_zeros":true,"significant":true},"storage_units":{"format":"%n %u","units":{"kb":"KB","tb":"TB","gb":"GB","byte":{"one":"Byte","other":"Bytes"},"mb":"MB"}},"decimal_units":{"format":"%n %u","units":{"trillion":"Trillion","billion":"Billion","quadrillion":"Quadrillion","million":"Million","unit":"","thousand":"Thousand"}}},"percentage":{"format":{"delimiter":""}},"precision":{"format":{"delimiter":""}},"currency":{"format":{"format":"%u%n","unit":"$","separator":".","precision":2,"delimiter":",","strip_insignificant_zeros":false,"significant":false}}},"layouts":{"admin":{"header":{"logged_in":{"hi":"Hi %{username}","sign_out":"Sign Out","my_account":"My Account"}}},"application":{"header":{"request_topic":{"sign_up":"Sign Up","button":"Request a topic","back_button":"back","title":"Title is empty","legend":"Anonymous users can't request a topic","error_login_empty":"Sign Up","topic_details":"Topic details is empty"},"auth":{"sign_up":"Sign Up","login":"Login"},"logged_in":{"hi":"Hi %{username}","sign_out":"Sign Out","my_account":"My Account"},"forgot_pass_form":{"not_found":"Username or Email not found","cancel":"Cancel","legend":"Enter your email address and we'll send you a link to reset your password.","sent":"We've sent you the instructions to your email.","empty":"Username or Email is empty","send":"Send my Password","login":"Email"},"login_form":{"not_found":"Username or Email not found","sign_in":"Sign In","forgot_password":"Forgot Password","invalid":"The email address or password is incorrect. Please try again.","wrong_password":"Wrong password","error_login_empty":"Username or Email is empty","password":"Password","login":"Email or Username"},"sign_up_form":{"terms_of_use":"Terms of Use","error_username_not":"This username is not available","error_password_empty":"The password is empty","note_pt1":"By clicking on Submit, you confirm that you accept the","legend":"Please register and enjoy all the benefits of Transcend!","note_pt2":"and","username":"Your Name or Nickname","note_pt3":"for using LGBT.","error_email_empty":"Email is empty","privacy_policy":"Privacy Policy","error_username_empty":"Username is empty","email":"Your Email"},"search_topics":"Search topics"},"footer":{"about":"About","privacy_policy":"Privacy Policy","all_rights":"\u00a9 Transcend - All Rights Reserved %{year}"}}},"activerecord":{"models":{"topic_request":"Topic Request"},"attributes":{"topic_request":{"title":"Title","anonymous_post":"Don't show any of my information when displaying this topic","content":"Content"},"user_profile":{"country_id":"Country of birth","gender_id":"Gender","ar":"Arabic","religion_id":"Religion","age_id":"Age","sexual_orientation_id":"Sexual orientation","en":"English","political_view":"Political view"},"reply":{"comment":"Comment","anonymous":"Anonymous","advice":"Advice","experience":"Experience"}},"errors":{"messages":{"record_invalid":"Validation failed: %{errors}","taken":"has already been taken"}}},"topic_requests":{"new":{"topicDetails":"Topic details","title":"Request a Topic","submit":"Submit","titleTopic":"Title"}},"errors":{"messages":{"greater_than_or_equal_to":"must be greater than or equal to %{count}","confirmation":"doesn't match confirmation","less_than_or_equal_to":"must be less than or equal to %{count}","not_an_integer":"must be an integer","blank":"can't be blank","exclusion":"is reserved","invalid":"is invalid","odd":"must be odd","voted":"You have already marked this as useful.","even":"must be even","flagged":"You have already flagged this reply.","wrong_length":"is the wrong length (should be %{count} characters)","too_short":"is too short (minimum is %{count} characters)","empty":"can't be empty","less_than":"must be less than %{count}","greater_than":"must be greater than %{count}","equal_to":"must be equal to %{count}","too_long":"is too long (maximum is %{count} characters)","accepted":"must be accepted","not_a_number":"is not a number","inclusion":"is not included in the list"},"format":"%{attribute} %{message}","template":{"header":{"one":"1 error prohibited this record from being saved:","other":"%{count} errors prohibited this record from being saved:"}}},"passwords":{"edit":{"submit":"Change password"}},"private_message":{"send_msg":"Send Private Message","submit":"Submit","cancel":"Cancel","no_activity":"No recent activity","points":"%{points} points","message_sent":"Your message was sent successfully!","recently_participated":"Recently participated in these topics:","expert":"is an Expert"},"topics":{"comments":{"new_response":"New Response"},"tag":{"sort_by":{"responses":"Most responses","label":"Sort by:","newest":"Newest"}},"topic":{"popular":{"response":"Response","by":"By %{author}"}},"show":{"icons":{"social":{"linked_in":"Liked In","facebook":"Facebook","twitter":"Twitter"}},"form":{"sign_up":"Sign Up","cancel":"Cancel","anonymous_legend":"Anonymous Responses can't be rated.","write_response":"Click here to write your response.","type_response":"Type of response:","continue":"Continue"},"contextual":{"hide":"Hide","reply_here":"Reply here","add_comment":"Add Comment"},"sidebar":{"filter_responses":{"title":"Filter Responses"},"hide_all_responses":"Hide all responses","filter_helpful":"Show only the helpful ones","need_help":"Need help?","show_all_responses":"Show all responses","experts":{"title":"Topic experts"}}},"related_content":{"related_content":{"title":"Related Content","view_more":"View More"}}},"time":{"am":"am","formats":{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},"pm":"pm"},"date":{"month_names":[null,"January","February","March","April","May","June","July","August","September","October","November","December"],"abbr_day_names":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"order":["year","month","day"],"formats":{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},"day_names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"abbr_month_names":[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},"mailers":{"user":{"topic_match_notification":{"subject":"You have been invited to participate on a topic"}}},"support":{"array":{"words_connector":", ","last_word_connector":", and ","two_words_connector":" and "}},"shared":{"new_response":{"new_response":"New Response"},"useful_flag_buttons":{"sign_up":"Sign Up","useful":"This was useful!","flag":"Flag","anonymous":"Anonymous users can't be rated"}},"users":{"inbox":{"no_messages":"There are no private messages"},"show":{"content":{"avatars":{"suggested":"Select your avatar","loading":"Loading Avatars...","custom_avatar":"Custom Avatar"},"private_messages":{"by":"by %{sender}","confirm_delete":"Are you sure you want to delete all messages in this thread? This cannot be undo.","title":"Private Messages","delete":"Delete","add_reply":"Click here to add a reply.","reply":"Reply","back_to_msgs":"Back to messages","at_date":"in %{date}","send_reply":"Send Reply"}},"sidebar":{"new_user":{"legend_st_line":"Build your profile info and","legend_nd_line":"connect with people like you!","question":"Who are you?"},"buttons":{"cancel":"Cancel","save":"Save"},"profile":{"title":"My Profile"},"edit_profile":"Edit Profile","confirm_terminate":"Are you sure you want to delete your account? This cannot be undo.","my_account":{"title":"My Account","nickname":"Nickname","language":"Language","errors":{"invalid_email":"Email is invalid","password_too_short":"The new password its too short."},"mail":"Mail"},"points":"%{points} points","terminate_account":"Terminate account","password":{"title":"Change password","confirm_password":"Confirm Password","errors":{"confirm_password":"Password doesn't match confirmation","new_password":"The new password is to short."},"new_password":"New Password"},"saved":"Your profile has been updated!"}}},"catalogs":{"sexual_orientation":{"bisexual":"Bi-sexual","transvestite":"Transvestite","intersexual":"Intersexual","no_say":"Would rather not say","transsexual":"Transsexual","straight":"Straight","pansexual":"Pansexual","queer":"Queer","lesbian":"Lesbian","gay":"Gay"},"country":{"nepal":"Nepal","kyrgyzstan":"Kyrgyzstan","french_polynesia":"French Polynesia","cyprus":"Cyprus","iraq":"Iraq","tajikistan":"Tajikistan","vanuatu":"Vanuatu","nauru":"Nauru","western_sahara":"Western Sahara","turkmenistan":"Turkmenistan","bhutan":"Bhutan","sierra_leone":"Sierra Leone","latvia":"Latvia","yemen":"Yemen","russian_federation":"Russian Federation","guyana":"Guyana","aruba":"Aruba","san_marino":"San Marino","kuwait":"Kuwait","belize":"Belize","barbados":"Barbados","netherlands":"Netherlands","serbia":"Serbia","senegal":"Senegal","burkina_faso":"Burkina Faso","iceland":"Iceland","bahamas":"Bahamas","niger":"Niger","viet_nam":"Viet Nam","uruguay":"Uruguay","sudan":"Sudan","norfolk_island":"Norfolk Island","macao":"Macao","kazakhstan":"Kazakhstan","moldova_republic_of":"Moldova, Republic of","united_states_minor_outlying_islands":"United States Minor Outlying Islands","virgin_islands_us":"Virgin Islands, U.S.","cayman_islands":"Cayman Islands","trinidad_and_tobago":"Trinidad and Tobago","micronesia_federated_states_of":"Micronesia, Federated States of","hong_kong":"Hong Kong","mali":"Mali","new_zealand":"New Zealand","peru":"Peru","gibraltar":"Gibraltar","panama":"Panama","taiwan_province_of_china":"Taiwan, Province of China","czech_republic":"Czech Republic","ireland":"Ireland","ethiopia":"Ethiopia","isle_of_man":"Isle of Man","pakistan":"Pakistan","sao_tome_and_principe":"Sao Tome and Principe","portugal":"Portugal","ghana":"Ghana","holy_see":"Holy See (Vatican City State)","somalia":"Somalia","uzbekistan":"Uzbekistan","puerto_rico":"Puerto Rico","bolivia":"Bolivia","netherlands_antilles":"Netherlands Antilles","malaysia":"Malaysia","turks_and_caicos_islands":"Turks and Caicos Islands","chile":"Chile","saint_vincent_and_the_grenadines":"Saint Vincent and the Grenadines","equatorial_guinea":"Equatorial Guinea","malawi":"Malawi","aland_islands":"Aland Islands","norway":"Norway","lao_peoples_democratic_republic":"Lao People's Democratic Republic","mauritius":"Mauritius","jordan":"Jordan","suriname":"Suriname","saudi_arabia":"Saudi Arabia","bulgaria":"Bulgaria","denmark":"Denmark","madagascar":"Madagascar","algeria":"Algeria","lesotho":"Lesotho","central_african_republic":"Central African Republic","british_indian_ocean_territory":"British Indian Ocean Territory","france":"France","namibia":"Namibia","french_southern_territories":"French Southern Territories","chad":"Chad","swaziland":"Swaziland","croatia":"Croatia","saint_lucia":"Saint Lucia","tonga":"Tonga","ecuador":"Ecuador","israel":"Israel","saint_barthelemy":"Saint Barthelemy","jamaica":"Jamaica","togo":"Togo","guinea_bissau":"Guinea-Bissau","tokelau":"Tokelau","seychelles":"Seychelles","south_georgia_and_the_south_sandwich_islands":"South Georgia and the South Sandwich Islands","oman":"Oman","slovenia":"Slovenia","switzerland":"Switzerland","lithuania":"Lithuania","mayotte":"Mayotte","syrian_arab_republic":"Syrian Arab Republic","northern_mariana_islands":"Northern Mariana Islands","nigeria":"Nigeria","austria":"Austria","hungary":"Hungary","zambia":"Zambia","uganda":"Uganda","dominican_republic":"Dominican Republic","svalbard_and_jan_mayen":"Svalbard and Jan Mayen","japan":"Japan","martinique":"Martinique","gabon":"Gabon","colombia":"Colombia","monaco":"Monaco","samoa":"Samoa","reunion":"Reunion","guadeloupe":"Guadeloupe","maldives":"Maldives","haiti":"Haiti","canada":"Canada","kenya":"Kenya","new_caledonia":"New Caledonia","zimbabwe":"Zimbabwe","falkland_islands":"Falkland Islands (Malvinas)","italy":"Italy","mozambique":"Mozambique","belgium":"Belgium","germany":"Germany","benin":"Benin","mongolia":"Mongolia","indonesia":"Indonesia","thailand":"Thailand","palestinian_territory_occupied":"Palestinian Territory, Occupied","djibouti":"Djibouti","qatar":"Qatar","cape_verde":"Cape Verde","greenland":"Greenland","american_samoa":"American Samoa","paraguay":"Paraguay","french_guiana":"French Guiana","china":"China","palau":"Palau","anguilla":"Anguilla","australia":"Australia","philippines":"Philippines","egypt":"Egypt","virgin_islands_british":"Virgin Islands, British","ukraine":"Ukraine","bermuda":"Bermuda","liechtenstein":"Liechtenstein","timor_leste":"Timor-Leste","liberia":"Liberia","grenada":"Grenada","azerbaijan":"Azerbaijan","united_arab_emirates":"United Arab Emirates","cuba":"Cuba","cook_islands":"Cook Islands","jersey":"Jersey","el_salvador":"El Salvador","andorra":"Andorra","botswana":"Botswana","nicaragua":"Nicaragua","brunei_darussalam":"Brunei Darussalam","estonia":"Estonia","tunisia":"Tunisia","lebanon":"Lebanon","mexico":"Mexico","cocos_islands":"Cocos (Keeling) Islands","dominica":"Dominica","antigua_and_barbuda":"Antigua And Barbuda","montserrat":"Montserrat","united_states":"United States","georgia":"Georgia","bouvet_island":"Bouvet Island","guam":"Guam","wallis_and_futuna":"Wallis and Futuna","luxembourg":"Luxembourg","fiji":"Fiji","cambodia":"Cambodia","finland":"Finland","solomon_islands":"Solomon Islands","morocco":"Morocco","argentina":"Argentina","bahrain":"Bahrain","saint_kitts_and_nevis":"Saint Kitts and Nevis","niue":"Niue","south_africa":"South Africa","congo_the_democratic_republic_of_the":"Congo, the Democratic Republic of the","comoros":"Comoros","korea_republic_of":"Korea, Republic of","burundi":"Burundi","rwanda":"Rwanda","montenegro":"Montenegro","armenia":"Armenia","tuvalu":"Tuvalu","venezuela":"Venezuela","macedonia_the_former_yugoslav_republic_of":"Macedonia, The Former Yugoslav Republic Of","eritrea":"Eritrea","united_kingdom":"United Kingdom","turkey":"Turkey","saint_helena":"Saint Helena","kiribati":"Kiribati","gambia":"Gambia","saint_pierre_and_miquelon":"Saint Pierre and Miquelon","marshall_islands":"Marshall Islands","papua_new_guinea":"Papua New Guinea","guernsey":"Guernsey","brazil":"Brazil","guinea":"Guinea","sri_lanka":"Sri Lanka","congo":"Congo","albania":"Albania","costa_rica":"Costa Rica","honduras":"Honduras","bosnia_and_herzegowina":"Bosnia and Herzegowina","mauritania":"Mauritania","belarus":"Belarus","angola":"Angola","cote_divoire":"Cote d'Ivoire","spain":"Spain","korea_democratic_peoples_republic_of":"Korea, Democratic People's Republic of","christmas_island":"Christmas Island","poland":"Poland","singapore":"Singapore","tanzania_united_republic_of":"Tanzania, United Republic of","afghanistan":"Afghanistan","faroe_islands":"Faroe Islands","malta":"Malta","sweden":"Sweden","myanmar":"Myanmar","pitcairn":"Pitcairn","guatemala":"Guatemala","cameroon":"Cameroon","india":"India","antarctica":"Antarctica","heard_and_mcdonald_islands":"Heard and McDonald Islands","bangladesh":"Bangladesh","iran":"Iran, Islamic Republic of","slovakia":"Slovakia","greece":"Greece","libyan_arab_jamahiriya":"Libyan Arab Jamahiriya","romania":"Romania"},"gender":{"transgender":"Transgender","female":"Female","no_say":"Would rather not say","male":"Male"},"religion":{"taoism":"Taoism","christianity":"Christianity","agnostic":"Agnostic","none":"None","shinto":"Shinto","buddhism":"Buddhism","judaism":"Judaism","other":"Other","jainism":"Jainism","islam":"Islam","hinduism":"Hinduism","yazidi":"Yazidi","zoroastrianism":"Zoroastrianism","sikhism":"Sikhism","confucianism":"Confucianism","druze":"Druze","atheism":"Atheism","bahai":"Baha'i"},"political_view":{"pan_arabist":"Pan-Arabist","social_democrat":"Social Democrat","monarchist":"Monarchist","conservative":"Conservative","sharia_law":"Sharia Law","green":"Green","communist":"Communist","nationalist":"Nationalist","socialist":"Socialist","liberal":"Liberal","undeclared":"Undeclared","apolitical":"Apolitical","anarchist":"Anarchist","libertian":"Libertian"}},"private_messages":{"message":{"reply":"Send reply"}},"home":{"index":{"feeds":"What's Going on Now","popular_topics":"Most Popular Topics","join_now":"Join Now","title":"TRANSCEND","legend":"Supporting tagline will live here and it should be about this long","get_started":"And Get Started!","latest":{"has_left_a_comment":"%{author} has left an %{comment} on %{topic}"}}},"helpers":{"submit":{"submit":"Save %{model}","create":"Create %{model}","update":"Update %{model}"},"select":{"prompt":"Please select"},"ago":"%{time} ago"},"datetime":{"prompts":{"minute":"Minute","month":"Month","second":"Seconds","hour":"Hour","day":"Day","year":"Year"},"distance_in_words":{"less_than_x_minutes":{"one":"less than a minute","other":"less than %{count} minutes"},"x_days":{"one":"1 day","other":"%{count} days"},"almost_x_years":{"one":"almost 1 year","other":"almost %{count} years"},"x_seconds":{"one":"1 second","other":"%{count} seconds"},"about_x_hours":{"one":"about 1 hour","other":"about %{count} hours"},"x_minutes":{"one":"1 minute","other":"%{count} minutes"},"x_months":{"one":"1 month","other":"%{count} months"},"less_than_x_seconds":{"one":"less than 1 second","other":"less than %{count} seconds"},"about_x_years":{"one":"about 1 year","other":"about %{count} years"},"about_x_months":{"one":"about 1 month","other":"about %{count} months"},"over_x_years":{"one":"over 1 year","other":"over %{count} years"},"half_a_minute":"half a minute"}},"flash":{"actions":{"destroy":{"notice":"%{resource_name} was successfully destroyed.","alert":"%{resource_name} could not be destroyed."},"create":{"notice":"%{resource_name} was successfully created."},"update":{"notice":"%{resource_name} was successfully updated."}},"passwords":{"update":{"notice":"Your password has been changed. You can now log in with your new password."}},"application":{"should_be_admin":"You should have admin credentials to access this part of site.","not_logged_in":"You are not logged in"}},"replies":{"reply":{"already_flagged":"Already flagged","anonymous":"Anonymous","flagged":"Flagged","reply_to":"Reply to %{username}","already_useful":"Already marked as useful"}}}};

(function(){

  var interpolatePattern = /\{\{([^}]+)\}\}/g;

  //Replace {{foo} with obj.foo
  function interpolate(str, obj){
    return str.replace(interpolatePattern, function(){
      return obj[arguments[1]] || arguments[0];
    });
  };

  //Split "foo.bar" to ["foo", "bar"] if key is a string
  function keyToArray(key){
    if (!key) return [];
    if (typeof key != "string") return key;
    return key.split('.');
  };

  function locale(){
    return I18n.locale || I18n.defaultLocale;
  };

  function getLocaleFromCookie(){
    var cookies = document.cookie.split(/\s*;\s*/),
        i, pair, locale;
    for (i = 0; i < cookies.length; i++) {
      pair = cookies[i].split('=');
      if (pair[0] === 'locale') { locale = pair[1]; break; }
    }
    return locale;
  };


  I18n.init = function(){
    this.locale = getLocaleFromCookie();
  };

  //Works mostly the same as the Ruby equivalent, except there are
  //no symbols in JavaScript, so keys are always strings. The only time
  //this makes a difference is when differentiating between keys and values
  //in the defaultValue option. Strings starting with ":" will be considered
  //to be keys and used for lookup, while other strings are returned as-is.
  I18n.translate = function(key, opts){
    if (typeof key != "string") { //Bulk lookup
      var a = [], i;
      for (i=0; i<key.length; i++) {
        a.push(this.translate(key[i], opts));
      }
      return a;
    } else {
      opts = opts || {};
      opts.defaultValue = opts.defaultValue || null;
      key = keyToArray(opts.scope).concat(keyToArray(key));
      var value = this.lookup(key, opts.defaultValue);
      if (typeof value != "string" && value) value = this.pluralize(value, opts.count);
      if (typeof value == "string") value = interpolate(value, opts);
      return value;
    }
  };

  I18n.t = I18n.translate;

  //Looks up a translation using an array of strings where the last
  //is the key and any string before that define the scope. The current
  //locale is always prepended and does not need to be provided. The second
  //parameter is an array of strings used as defaults if the key can not be
  //found. If a key starts with ":" it is used as a key for lookup.
  //This method does not perform pluralization or interpolation.
  I18n.lookup = function(keys, defaults){
    var i = 0, value = this.translations[locale()];
    defaults = typeof defaults == "string" ? [defaults] : (defaults || []);
    while (keys[i]) {
      value = value && value[keys[i]];
      i++;
    }
    if (value){
      return value;
    } else {
      if (defaults.length == 0) {
        return null;
      } else if (defaults[0].substr(0,1) == ':') {
        return this.lookup(keys.slice(0,keys.length-1).concat(keyToArray(defaults[0].substr(1))), defaults.slice(1));
      } else {
        return defaults[0];
      }
    }
  };

  I18n.pluralize = function(value, count){
    if (!count) return value;
    return count == 1 ? value.one : value.other;
  };

})();

I18n.init();
